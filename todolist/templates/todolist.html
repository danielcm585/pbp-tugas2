{% extends 'base.html' %}

{% block content %}

<div class="relative">
  <div id="drawer" class="fixed inset-y-0 right-[-250px] z-40 h-screen p-4 shadow-lg text-white bg-gray-900 w-[240px] duration-300">
    <div class="flex justify-between mt-1 mr-2">
      <div></div>
      <button type="button" class="transition ease-in-out hover:scale-110" onclick="closeDrawer()">
        <?xml version="1.0" ?><svg viewBox="0 0 30 30" height="40" width="40" xmlns="http://www.w3.org/2000/svg"><defs><style>.cls-1{fill:none;stroke:#4A5568;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px;}</style></defs><title/><g id="cross"><line class="cls-1" x1="7" x2="25" y1="7" y2="25"/><line class="cls-1" x1="7" x2="25" y1="25" y2="7"/></g></svg>
      </button>
    </div>
    <div class="mt-20 w-full">
      <button class="py-4 w-full text-white bg-gradient-to-r from-blue-600 to-red-600 rounded-md text-2xl transition ease-in-out hover:scale-105" onclick="location.href='/todolist/create-task'" type="button">
        New Task
      </button>
      <button class="mt-4 py-4 w-full border-2 border-red-600 text-red-600 rounded-md text-2xl transition ease-in-out hover:scale-105" onclick="location.href='/todolist/logout'" type="button">
        Logout
      </button>
    </div>
  </div>
  <div class="sticky top-0">
    <div class="py-4 px-7 md:px-14 lg:px-28 xl:px-72 bg-gray-900 flex justify-between items-center">
      <h1 class="inline font-extrabold text-transparent text-5xl bg-clip-text bg-gradient-to-r from-blue-600 to-red-600">
        Todolist
      </h1>
      <!-- <div class="lg:hidden xl:hidden"> -->
        <button type="button" class="transition ease-in-out hover:scale-110" onclick="openDrawer()">
          <?xml version="1.0" ?><svg fill="none" height="40" viewBox="0 0 24 24" width="40" xmlns="http://www.w3.org/2000/svg"><path d="M4 6H20M4 12H20M4 18H20" stroke="#4A5568" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg>
        </button>
      <!-- </div> -->
      <!-- <div class="sm:hidden md:hidden">
        <button class="mr-4 py-2 px-4 text-xl text-white bg-gradient-to-r from-blue-600 to-red-600 rounded-md transition ease-in-out hover:scale-105" onclick="location.href='/todolist/create-task'" type="button">
          New Task
        </button>
        <button class="py-4 border-2 border-red-600 py-2 px-4 text-xl text-red-600 rounded-md text-2xl transition ease-in-out hover:scale-105" onclick="location.href='/todolist/logout'" type="button">
          Logout
        </button>
      </div> -->
    </div>
  </div>
  <div class="flex justify-center">
    <div class="mx-7 md:mx-14 lg:mx-28 xl:mx-72 w-full mt-6">
      <h1>
        {{ num_of_tasks }} tasks
      </h1>
      {% for task in tasks %}
        <div class="mt-2 py-4 px-6 bg-gray-100 items-center justify-between rounded-md flex transition ease-in-out hover:scale-105 hover:bg-gray-200">
          <div class="flex items-center">
            <div class="transition ease-in-out hover:scale-110">
              {% if task.done %}
                <a href="{% url 'todolist:mark_done' id=task.pk %}">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M10.041 17l-4.5-4.319 1.395-1.435 3.08 2.937 7.021-7.183 1.422 1.409-8.418 8.591zm-5.041-15c-1.654 0-3 1.346-3 3v14c0 1.654 1.346 3 3 3h14c1.654 0 3-1.346 3-3v-14c0-1.654-1.346-3-3-3h-14zm19 3v14c0 2.761-2.238 5-5 5h-14c-2.762 0-5-2.239-5-5v-14c0-2.761 2.238-5 5-5h14c2.762 0 5 2.239 5 5z"/></svg>
                </a>
              {% else %}
              <a href="{% url 'todolist:mark_done' id=task.pk %}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M5 2c-1.654 0-3 1.346-3 3v14c0 1.654 1.346 3 3 3h14c1.654 0 3-1.346 3-3v-14c0-1.654-1.346-3-3-3h-14zm19 3v14c0 2.761-2.238 5-5 5h-14c-2.762 0-5-2.239-5-5v-14c0-2.761 2.238-5 5-5h14c2.762 0 5 2.239 5 5z"/></svg>
              </a>
              {% endif %}
            </div>
            <div class="ml-6">
              <h2 class="font-bold">
                {{ task.title }}
              </h2>
              <p class="text-blue-600">
                {{ task.date }}
              </p>
              <p class="text-gray-500">
                {{ task.description }}
              </p>
            </div>
          </div>
          <form action="{% url 'todolist:delete' id=task.pk %}">
            <button class="text-red-600 p-2 rounded-md transition ease-in-out hover:scale-110" type="submit">
              Delete
            </button>
          </form>
        </div>
      {% endfor %}
    </div>
  </div>
  <footer class="mx-7 md:mx-14 lg:mx-28 xl:mx-72 mt-10 p-4 shadow ">
    <hr class="my-6 border-gray-200 sm:mx-auto dark:border-gray-700 lg:my-8" />
    <div class="flex justify-center">
      <div class="block mt-4 text-sm text-gray-500 text-center">
        Â© 2022 
        <a href="/me"">Daniel Christian M</a>
        . All Rights Reserved.
    </div>
  </footer>
</div>
<script>
  let drawer = document.getElementById("drawer");
  function openDrawer() {
    console.log("HERE")
    drawer.classList.remove('right-[-250px]');
    drawer.classList.add('right-0');
  }

  function closeDrawer() {
    drawer.classList.remove('right-0');
    drawer.classList.add('right-[-250px]');
  }
</script>

{% endblock content %}
